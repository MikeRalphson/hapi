<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<f:view contentType="text/html">

	<h:head>
		<h:outputStylesheet library="css" name="default.css" />

		<style type="text/css">
.ui-layout-north {
	z-index: 20 !important;
	overflow: visible !important;;
}

.ui-layout-north .ui-layout-unit-content {
	overflow: visible !important;
}

body {
	background-color: #FFFFFF;
}
</style>
	</h:head>

	<h:body>

		<p:layout fullPage="true" styleClass="ui-fluid">
			<p:layoutUnit id="top" position="north" size="50">

				<p:toolbar>
					<f:facet name="left">
						<p:commandButton type="button" value="New" icon="ui-icon-document" />

						<p:commandButton type="button" value="Open"
							icon="ui-icon-folder-open" />

						<span class="ui-separator"> <span
							class="ui-icon ui-icon-grip-dotted-vertical" />
						</span>

						<p:commandButton type="button" title="Save" icon="ui-icon-disk" />
						<p:commandButton type="button" title="Delete" icon="ui-icon-trash" />
						<p:commandButton type="button" title="Print" icon="ui-icon-print" />
					</f:facet>

					<f:facet name="right">
						<h:form>
  <p:commandButton id="downloadLink" value="Download" ajax="false" actionListener="#{discovererBean.prepDownload}">
    <p:fileDownload value="#{discovererBean.download}" />
  </p:commandButton>
  <p:commandButton id="downloadEcore" value="Download Schema" ajax="false" actionListener="#{discovererBean.downloadEcore}">
    <p:fileDownload value="#{discovererBean.ecore}" />
  </p:commandButton>
</h:form>
					</f:facet>

				</p:toolbar>
			</p:layoutUnit>

			<p:layoutUnit id="bottom" position="south" size="60">
                   Som research lab
                </p:layoutUnit>

			<p:layoutUnit id="left" position="west" size="400" resizable="true"
				closable="false" collapsible="true" header="Records" minSize="200">
				<p:accordionPanel id="recordsPanel">
					<p:tab title="Records">
						<p:outputPanel id="records">
							<p:dataTable value="#{discovererBean.records}" var="apiRequest"
								id="recordsTable">

								<p:column>
									<h:outputText value="#{apiRequest.url}" />
								</p:column>

							</p:dataTable>
						</p:outputPanel>
					</p:tab>


				</p:accordionPanel>
			</p:layoutUnit>

			<p:layoutUnit id="right" position="east" size="250"
				header="Discovered" resizable="true" closable="false"
				collapsible="true" style="text-align:center">


			</p:layoutUnit>

			<p:layoutUnit id="center" position="center">
			<p:layout >
			<p:layoutUnit id="center-south" position="south" header="Response"  resizable="true"  size="200"
				collapsible="true" >
				<h:form id="responseForm" prependId="false">
					<p:panelGrid columns="2"
						columnClasses="ui-grid-col-2,ui-grid-col-10" layout="grid"
						styleClass="ui-panelgrid-blank">
						<h:outputText value="Status" />
						<h:outputText value="#{discovererBean.response.status}" />
					
						<p:outputLabel for="response_body" value="Body"   />
						<p:inputTextarea id="response_body"  rows="10"  style="width: 100%;" value="#{discovererBean.response.body}"/>
						
					</p:panelGrid>
				</h:form>
				</p:layoutUnit>
			<p:layoutUnit id="center-center" position="center" header="Request"  resizable="true" 
				collapsible="false" >
				<h:form id="mainForm" prependId="false">
					<p:panelGrid columns="2"
						columnClasses="ui-grid-col-2,ui-grid-col-10" layout="grid"
						styleClass="ui-panelgrid-blank">
						<p:outputLabel for="url" value="Request URL" />
						<p:inputText id="url" style="width: 100%;" value="#{discovererBean.newAPIRequest.url}" />
						<p:outputLabel for="method" value="Method" />
						<p:selectOneButton id="method"
							value="#{discovererBean.newAPIRequest.httpMethod}" >
							 <f:selectItems value="#{httpMethodsBean.getMethods()}" var="httpMethod" itemLabel="#{httpMethod.label}" itemValue="#{httpMethod}"/>
						</p:selectOneButton>
						<p:outputLabel for="request_body" value="Body"   />
						<p:inputTextarea id="request_body"  rows="10"  style="width: 100%;" value="#{discovererBean.newAPIRequest.body}"/>
						<p:commandButton id="btn_send" value="Send"
							update="recordsPanel:records responseForm"
							action="#{discovererBean.sendRequest}">
						
						</p:commandButton>
						<p:commandButton id="clean" value="New request" update="@parent responseForm" action="#{discovererBean.cleanForms}"/>
					</p:panelGrid>
				</h:form>
			</p:layoutUnit>
			
			</p:layout>
			</p:layoutUnit>

		</p:layout>



	</h:body>

</f:view>


</html>